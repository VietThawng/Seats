<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="style.css">
  <title>Chọn chỗ ngồi sự kiện Niên Vọng</title>
</head>
<body>
  <h1>Chọn chỗ ngồi</h1>

  <!-- Màn hình phía trước -->
  <div class="screen">MÀN HÌNH</div>

  <!-- Ghế ngồi -->
  <div id="seat-map" class="seats"></div>

  <!-- Nút thao tác -->
  <div class="controls">
    <button id="confirmBtn" disabled>Xác nhận</button>
    <button id="releaseBtn" disabled>Huỷ chọn</button>
    <button id="resetBtn">Reset tất cả</button>
    <div id="count">Đã chọn: 0</div>
  </div>

<script>
const ROWS = 16, COLS = 8; // số hàng và cột ghế
let seats = [];
let selected = new Set();

// Khởi tạo ghế
function initSeats(){
  seats = [];
  let id = 1;
  for(let r=0;r<ROWS;r++){
    for(let c=0;c<COLS;c++){
      seats.push({id:id++, row:r+1, col:c+1, status:'available'});
    }
  }
}

// Vẽ giao diện
function render(){
  const mapEl = document.getElementById('seat-map');
  mapEl.innerHTML = '';
  seats.forEach(s=>{
    const el = document.createElement('div');
    el.className = 'seat ' + s.status;
    el.textContent = s.row + '-' + s.col;
    el.addEventListener('click',()=>onSeatClick(s.id));
    mapEl.appendChild(el);
  });
  updateUI();
}

// Xử lý click
function onSeatClick(id){
  const s = seats.find(x=>x.id===id);
  if(!s || s.status==='booked') return;

  if(selected.has(id)){
    selected.delete(id);
    s.status='available';
  } else {
    selected.add(id);
    s.status='selected';
  }
  render();
}

// Cập nhật UI
function updateUI(){
  document.getElementById('count').textContent = 'Đã chọn: ' + selected.size;
  document.getElementById('confirmBtn').disabled = selected.size===0;
  document.getElementById('releaseBtn').disabled = selected.size===0;
}

// Xác nhận
confirmBtn.addEventListener('click',()=>{
  selected.forEach(id=>{
    const s = seats.find(x=>x.id===id);
    if(s) s.status='booked';
  });
  selected.clear();
  render();
});

// Huỷ chọn
releaseBtn.addEventListener('click',()=>{
  selected.forEach(id=>{
    const s = seats.find(x=>x.id===id);
    if(s) s.status='available';
  });
  selected.clear();
  render();
});

// Reset tất cả
resetBtn.addEventListener('click',()=>{
  initSeats();
  selected.clear();
  render();
});

// Khởi động
initSeats();
render();
</script>
</body>
</html>